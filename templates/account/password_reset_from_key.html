{% extends "account/base_entrance.html" %}
{% load i18n %}
{% load allauth %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static "css/custom.css" %}">
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock extra_head %}

{% block head_title %}
    {% trans "Change Password" %}
{% endblock head_title %}

{% block content %}
    <div class="container mt-5">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
            <a class="navbar-brand" href="#">{% trans "YourSiteName" %}</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="{% trans "Toggle navigation" %}">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'account_login' %}">{% trans "Sign In" %}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'account_signup' %}">{% trans "Sign Up" %}</a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        {% element h1 %}
            {% if token_fail %}
                <h1 class="text-danger">
                    {% trans "Bad Token" %}
                </h1>
            {% else %}
                <h1 class="text-primary">
                    {% trans "Change Password" %}
                </h1>
            {% endif %}
        {% endelement %}
        {% if token_fail %}
            {% url 'account_reset_password' as passwd_reset_url %}
            <div class="alert alert-warning" role="alert">
                {% blocktrans %}The password reset link was invalid, possibly because it has already been used.  Please request a <a href="{{ passwd_reset_url }}" class="alert-link">new password reset</a>.{% endblocktrans %}
            </div>
        {% else %}
            {% element form method="post" action=action_url %}
                {% slot body %}
                    {% csrf_token %}
                    {{ redirect_field }}
                    {% element fields form=form %}
                    {% endelement %}
                {% endslot %}
                {% slot actions %}
                    <button type="submit" class="btn btn-primary">
                        {% trans 'Change Password' %}
                    </button>
                {% endslot %}
            {% endelement %}
        {% endif %}
    </div>
{% endblock content %}
